#include <stdio.h>
#include <stdlib.h>
#include<string.h>
#define MAX 100

struct mypeeps_struct {
	char lastname[MAX];
	char firstname[MAX];
	char cityname[MAX];
};

typedef struct mypeeps_struct mypeeps_t;
int compar(const void *p1, const void *p2) {
	int a;
	mypeeps_t *a1 = ((mypeeps_t*) p1);
	mypeeps_t *a2 = ((mypeeps_t*) p2);
	a = strcmp(a1->lastname, a2->lastname);

	if (a > 0)

	{
		return 1;
	} else if (a < 0) {
		return -1;
	}

	else {
		return 0;
	}
}

int main(void) {
	mypeeps_t structs[100];

	FILE *ptr = fopen("/home/vishal/vish.txt", "r");
	int ctr = 0, num = 0;

	char str1[30], str2[30], str3[30];

	if (ptr != NULL) {
		while (fscanf(ptr, "%s %s %s", str1, str2, str3) != EOF) {
			strcpy(structs[ctr].lastname, str1);
			strcpy(structs[ctr].firstname, str2);
			strcpy(structs[ctr].cityname, str3);
			++ctr;
			num++;

		}
	}

	else if (ptr == NULL) {
		printf("Error");
		return 1;
	}

	printf("Actual names\n");
	printf("-----------------------------\n");
	for (int i = 0; i < num; i++) {
		printf("%s %s %s\n", structs[i].lastname, structs[i].firstname,
				structs[i].cityname);
	}

	qsort(structs, num, sizeof(mypeeps_t), compar);
	printf("\nSorted array...\n");
	printf("------------------------------\n");

	for (int i = 0; i < num; i++) {
		printf("%s %s %s\n", structs[i].lastname, structs[i].firstname,
				structs[i].cityname);
	}

	return 0;
}
